<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
	<title>nyc.ol.Draw Example</title>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://cdn.rawgit.com/openlayers/openlayers.github.io/master/en/v5.1.3/build/ol.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.3.15/proj4.js"></script>
	<script src="../../js/babel-polyfill.js"></script>
  <script src="../../js/nyc-ol-lib.js"></script>
  <link href="../../css/nyc-ol-fullscreen-lib.css" rel="stylesheet">
	<title>OpenLayers Example</title>

	<style>
		html, body, #map {
			margin: 0;
			padding: 0;
			overflow: hidden;
		}
		 #map {
		 	position: absolute;
		 	top: 0;
		 	left: 0;
		 	bottom: 0;
		 	right: 0;
		 }
		 #collapsible {
      margin: 30px auto;
      display: block;
      width: 200px;
			z-index: 1;

		 }
		@media only screen and (max-width : 610px) {
			.fld-srch-container {
				right: 44px;
			}
		}
	</style>
</head>
<body>
	<div id="map">
		<div id="collapsible"></div>
		<div id="radio"></div>
	</div>

	<script>
		$(document).ready(function(){
			/*
			map = new ol.Map({
				target: $('#map').get(0),
				view: new ol.View({zoom: 10, center: nyc.ol.Basemap.CENTER}),
				layers: [
					new ol.layer.Tile({
						source: new ol.source.OSM({
							url: 'https://cartodb-basemaps-{1-4}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png'
						})
					})
				]
			});


			// See README.md for getting your GeoClient App Id and App Key //
			let geocoder = new nyc.Geoclient('https://maps.nyc.gov/geoclient/v1/search.json?app_key=74DF5DB1D7320A9A2&app_id=nyc-lib-example');

			new nyc.LocationMgr({
				controls: new nyc.ol.ZoomSearch(map),
				locator: new nyc.ol.Locator(geocoder),
				mapLocator: new nyc.ol.MapLocator({map: map})
			});
			*/

			let url = 'https://maps.nyc.gov/geoclient/v1/search.json?app_key=74DF5DB1D7320A9A2&app_id=nyc-lib-example';
			let map = new nyc.ol.Basemap({target: 'map'});
			let zoomSearch = new nyc.ol.ZoomSearch(map);
			let geoclient = new nyc.Geoclient({url: url});
			let locator = new nyc.ol.Locator({geocoder: geoclient});
			let mapLocator = new nyc.ol.MapLocator({map: map})
			let locationMgr = new nyc.LocationMgr({
				zoomSearch: zoomSearch,
				locator: locator,
				mapLocator: mapLocator
			});
			let options = {
				map: map,
				source: new ol.source.OSM({
					url: 'https://cartodb-basemaps-{1-4}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png'
				}),
				style: null
			}
			let draw = new nyc.ol.Draw({map: map});

			// draw.on(nyc.ol.FeatureEventType.ADD, function(feature){
			// 	console.info("Feature added:", feature);
			// });

			// draw.on(nyc.ol.FeatureEventType.CHANGE, function(feature){
			// 	console.info("Feature changed:", feature);
			// });

			// draw.on(nyc.ol.FeatureEventType.REMOVE, function(feature){
			// 	console.info("Feature removed:", feature);
			// });

    var radio = new nyc.Choice({
      target: '#radio',
      radio: true,
      choices: [
        {name: 'plant', label: 'Tree', values: ['a']},
        {name: 'plant', label: 'Flower', values: ['b', 'c', 'd']},
        {name: 'plant', label: 'Leaf', values: ['z', 'q']}
      ]
    });
    var collapsible = new nyc.Collapsible({
      target: '#collapsible',
      title: 'Pets',
      content: '#radio'
    });			

		});
	</script>
</body>
</html>
