<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">

	<title>OpenLayers Example</title>

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-mobile/1.4.5/jquery.mobile.min.css">
	<link href="https://cdnjs.cloudflare.com/ajax/libs/openlayers/4.3.2/ol.css" rel="stylesheet">
	<!-- nyc css -->
	<link rel="stylesheet" href="../src/main/css/nyc-base.css"> 
	<link rel="stylesheet" href="../src/main/css/control-common.css"> 
	<link rel="stylesheet" href="../src/main/css/dialog.css"> 
	<link rel="stylesheet" href="../src/main/css/collapsible.css"> 
	<link rel="stylesheet" href="../src/main/css/layermgr.css"> 
	<link rel="stylesheet" href="../src/main/css/zoomsearch.css"> 
	<link rel="stylesheet" href="../src/main/css/mapmenu.css"> 
	<!-- nyc css -->

	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-mobile/1.4.5/jquery.mobile.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.3.15/proj4.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/openlayers/4.3.2/ol-debug.js"></script>
<script src="https://unpkg.com/shapefile@0.6"></script>
	<!-- nyc js -->
	<script src="../src/main/js/nyc/nyc.js"></script>
	<script src="../src/main/js/nyc/util.js"></script>
	<script src="../src/main/js/nyc/storage.js"></script>
	<script src="../src/main/js/nyc/ol/storage.js"></script>
	<script src="../src/main/js/nyc/basemap.js"></script>
	<script src="../src/main/js/nyc/dialog.js"></script>
	<script src="../src/main/js/nyc/locate.js"></script>
	<script src="../src/main/js/nyc/locationmgr.js"></script>
	<script src="../src/main/js/nyc/geocoder.js"></script>
	<script src="../src/main/js/nyc/ctlcontainer.js"></script>
	<script src="../src/main/js/nyc/zoomsearch.js"></script>
	<script src="../src/main/js/nyc/ol/ol.js"></script>
	<script src="../src/main/js/nyc/ol/basemap.js"></script>
	<script src="../src/main/js/nyc/ol/locate.js"></script>
	<script src="../src/main/js/nyc/ol/locator.js"></script>
	<script src="../src/main/js/nyc/ol/featuretip.js"></script>
	<script src="../src/main/js/nyc/ol/style/style.js"></script>
	<script src="../src/main/js/nyc/ol/control/zoomsearch.js"></script>
	<script src="../src/main/js/nyc/ol/style/pattern.js"></script>
	<!-- nyc js -->
	
	<style>
		 #map {
		 	position: fixed;
		 	top: 0;
		 	left: 0;
		 	bottom: 0;
		 	right: 0;
		 }
		 #add-geojson, #add-shp {
		 	position: fixed;
		 	top: 3px;
		 	margin: 0;
		 	right: 3px;
		 	width: 150px;
		 	color: #fff;
		 	padding: 8px;
		 }
		 #add-shp {
		 	top: 44px;
		 }
	</style>
</head>
<body>
	<div id="map"></div>
	<button id="add-geojson" class="ctl-btn" data-role="button" onclick="storage.loadGeoJsonFile(map);">Add GeoJSON</button>
	<button id="add-shp" class="ctl-btn" data-role="button" onclick="storage.loadShapeFile(map);">Add Shapefile</button>
	<script>
	
	x=(function(){
	return {"exact":true,"html_terms":"PROJCS[\"NAD83 / New York Long Island (ftUS)\", GEOGCS[\"NAD83\", DATUM[\"North American Datum 1983\", SPHEROID[\"GRS 1980\", 6378137.0, 298.257222101, AUTHORITY[\"EPSG\",\"7019\"]], TOWGS84[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0], AUTHORITY[\"EPSG\",\"6269\"]], PRIMEM[\"Greenwich\", 0.0, AUTHORITY[\"EPSG\",\"8901\"]], UNIT[\"degree\", 0.017453292519943295], AXIS[\"Geodetic longitude\", EAST], AXIS[\"Geodetic latitude\", NORTH], AUTHORITY[\"EPSG\",\"4269\"]], PROJECTION[\"Lambert_Conformal_Conic_2SP\", AUTHORITY[\"EPSG\",\"9802\"]], PARAMETER[\"central_meridian\", -74.0], PARAMETER[\"latitude_of_origin\", 40.166666666666664], PARAMETER[\"standard_parallel_1\", 41.03333333333333], PARAMETER[\"false_easting\", 984250.0], PARAMETER[\"false_northing\", 0.0], PARAMETER[\"scale_factor\", 1.0], PARAMETER[\"standard_parallel_2\", 40.666666666666664], UNIT[\"foot_survey_us\", 0.30480060960121924], AXIS[\"Easting\", EAST], AXIS[\"Northing\", NORTH], AUTHORITY[\"EPSG\",\"2263\"]]","codes":[{"name":"NAD83 / New York Long Island (ftUS)","code":"2263","url":"http://prj2epsg.org/epsg/2263.json"}],"html_showResults":true};	
	})()
	
		var storage = new nyc.ol.storage.Layer(), map;
	
		$(document).ready(function(){

			map = new nyc.ol.Basemap({target: $('#map').get(0)});
			
			/* See README.md for getting your GeoClient App Id and App Key */
			var geocoder = new nyc.Geoclient(
				'https://maps.nyc.gov/geoclient/v1/search.json?app_key=74DF5DB1D7320A9A2&app_id=nyc-lib-example'
			);

			var mgr = new nyc.LocationMgr({
				controls: new nyc.ol.control.ZoomSearch(map),
				locate: new nyc.ol.Locate(geocoder),
				locator: new nyc.ol.Locator({map: map})
			});
		});
		
		function test(){

// 			$.getScript( 'http://prj2epsg.org/search.json?mode=wkt&terms=PROJCS[%22NAD83%20/%20New%20York%20Long%20Island%20(ftUS)%22,%20GEOGCS[%22NAD83%22,%20DATUM[%22North%20American%20Datum%201983%22,%20SPHEROID[%22GRS%201980%22,%206378137.0,%20298.257222101,%20AUTHORITY[%22EPSG%22,%227019%22]],%20TOWGS84[0.0,%200.0,%200.0,%200.0,%200.0,%200.0,%200.0],%20AUTHORITY[%22EPSG%22,%226269%22]],%20PRIMEM[%22Greenwich%22,%200.0,%20AUTHORITY[%22EPSG%22,%228901%22]],%20UNIT[%22degree%22,%200.017453292519943295],%20AXIS[%22Geodetic%20longitude%22,%20EAST],%20AXIS[%22Geodetic%20latitude%22,%20NORTH],%20AUTHORITY[%22EPSG%22,%224269%22]],%20PROJECTION[%22Lambert_Conformal_Conic_2SP%22,%20AUTHORITY[%22EPSG%22,%229802%22]],%20PARAMETER[%22central_meridian%22,%20-74.0],%20PARAMETER[%22latitude_of_origin%22,%2040.166666666666664],%20PARAMETER[%22standard_parallel_1%22,%2041.03333333333333],%20PARAMETER[%22false_easting%22,%20984250.0],%20PARAMETER[%22false_northing%22,%200.0],%20PARAMETER[%22scale_factor%22,%201.0],%20PARAMETER[%22standard_parallel_2%22,%2040.666666666666664],%20UNIT[%22foot_survey_us%22,%200.30480060960121924],%20AXIS[%22Easting%22,%20EAST],%20AXIS[%22Northing%22,%20NORTH],%20AUTHORITY[%22EPSG%22,%222263%22]]', function( data, textStatus, jqxhr ) {
// 				  console.log( data ); // Data returned
// 				  console.log( textStatus ); // Success
// 				  console.log( jqxhr.status ); // 200
// 				  console.log( "Load was performed." );
// 				});   
			
			$.ajax({
				url: 'http://prj2epsg.org/search.json?mode=wkt&terms=PROJCS[%22NAD83%20/%20New%20York%20Long%20Island%20(ftUS)%22,%20GEOGCS[%22NAD83%22,%20DATUM[%22North%20American%20Datum%201983%22,%20SPHEROID[%22GRS%201980%22,%206378137.0,%20298.257222101,%20AUTHORITY[%22EPSG%22,%227019%22]],%20TOWGS84[0.0,%200.0,%200.0,%200.0,%200.0,%200.0,%200.0],%20AUTHORITY[%22EPSG%22,%226269%22]],%20PRIMEM[%22Greenwich%22,%200.0,%20AUTHORITY[%22EPSG%22,%228901%22]],%20UNIT[%22degree%22,%200.017453292519943295],%20AXIS[%22Geodetic%20longitude%22,%20EAST],%20AXIS[%22Geodetic%20latitude%22,%20NORTH],%20AUTHORITY[%22EPSG%22,%224269%22]],%20PROJECTION[%22Lambert_Conformal_Conic_2SP%22,%20AUTHORITY[%22EPSG%22,%229802%22]],%20PARAMETER[%22central_meridian%22,%20-74.0],%20PARAMETER[%22latitude_of_origin%22,%2040.166666666666664],%20PARAMETER[%22standard_parallel_1%22,%2041.03333333333333],%20PARAMETER[%22false_easting%22,%20984250.0],%20PARAMETER[%22false_northing%22,%200.0],%20PARAMETER[%22scale_factor%22,%201.0],%20PARAMETER[%22standard_parallel_2%22,%2040.666666666666664],%20UNIT[%22foot_survey_us%22,%200.30480060960121924],%20AXIS[%22Easting%22,%20EAST],%20AXIS[%22Northing%22,%20NORTH],%20AUTHORITY[%22EPSG%22,%222263%22]]',
				dataType: 'jsonp',
// 				converters: {
					
// 				},
// 				success: function(result){
// 					console.info(arguments);
// 				},
				error: function(){
					console.error(arguments);
				}
			});
		};
	</script>
</body>
</html>
